from __init__ import *
from app.models.description import Description

def test_description():
    mock_extracted_hash = {u'count': 40.0, u'valuetype': u'string', u'values': [{u'lang': u'en', u'creator': u'/user/wikirecon_bot', u'text': u"The National Basketball Association is the pre-eminent men's professional basketball league in...", u'citation': {u'uri': u'http://en.wikipedia.org/wiki/National_Basketball_Association', u'statement': u'Description licensed under the Creative Commons Attribution-ShareAlike License (http://en.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License).', u'provider': u'Wikipedia'}, u'value': u"The National Basketball Association is the pre-eminent men's professional basketball league in North America, and is widely considered to be the premier men's professional basketball league in the world. It has thirty franchised member clubs, and is an active member of USA Basketball, which is recognized by FIBA as the national governing body for basketball in the United States. The NBA is one of the four major North American professional sports leagues. NBA players are the world's best paid sportsmen, by average annual salary per player.\nThe league was founded in New York City on June 6, 1946, as the Basketball Association of America. The league adopted the name National Basketball Association on August 3, 1949, after absorbing the rival National Basketball League. The league's several international as well as individual team offices are directed out of its head offices located in the Olympic Tower at 645 Fifth Avenue in New York City. NBA Entertainment and NBA TV studios are directed out of offices located in Secaucus, New Jersey.", u'dataset': u'/m/0kj4zz_', u'project': u'wikirecon'}]}
    description = Description()
    description.extract(mock_extracted_hash)

    assert_equal(description.text, u"The National Basketball Association is the pre-eminent men's professional basketball league in North America, and is widely considered to be the premier men's professional basketball league in the world. It has thirty franchised member clubs, and is an active member of USA Basketball, which is recognized by FIBA as the national governing body for basketball in the United States. The NBA is one of the four major North American professional sports leagues. NBA players are the world's best paid sportsmen, by average annual salary per player.\nThe league was founded in New York City on June 6, 1946, as the Basketball Association of America. The league adopted the name National Basketball Association on August 3, 1949, after absorbing the rival National Basketball League. The league's several international as well as individual team offices are directed out of its head offices located in the Olympic Tower at 645 Fifth Avenue in New York City. NBA Entertainment and NBA TV studios are directed out of offices located in Secaucus, New Jersey.")